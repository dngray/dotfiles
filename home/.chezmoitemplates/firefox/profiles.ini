{{- if not .headless }}

{{- /* Final profile paths for each installation version */ -}}
{{- $defaultPath := "default" -}}
{{- $directPath := "direct" -}}
{{- $directNoRFPpath := "direct-no-rfp" -}}
{{- $noRFPpath := "default-no-rfp" -}}
{{- $relative := "1" -}}

{{- /* IDs for each installation version */ -}}
{{- $releaseId := "0" -}}
{{- $nightlyId := "0" -}}

{{- if eq .os  "windows" -}}
{{-   $releaseId = mozillaInstallHash "C:\\Program Files\\Mozilla Firefox" -}}{{- /* "308046B0AF4A39CB" */ -}}
{{-   $nightlyId = mozillaInstallHash "C:\\Program Files\\Firefox Nightly" -}}{{- /* "6F193CCC56814779" */ -}}
{{- else if eq .os  "darwin" -}}
{{-   $releaseId = mozillaInstallHash "/Applications/Firefox.app/Contents/MacOS" -}}{{- /* "2656FF1E876E9973" */ -}}
{{-   $nightlyId = mozillaInstallHash "/Applications/Firefox Nightly.app/Contents/MacOS" -}}{{- /* "31210A081F86E80E" */ -}}
{{- else if eq .os  "linux" -}}
{{-   if eq .installType "package" -}}
{{-     $relative = "0" -}}
{{-     $defaultPath = joinPath .homeDir "/.config/firefox/profiles/default" -}}
{{-     $directPath = joinPath .homeDir "/.config/firefox/profiles/direct" -}}
{{-     $directNoRFPpath = joinPath .homeDir "/.config/firefox/profiles/direct-no-rfp" -}}
{{-     $noRFPpath = joinPath .homeDir "/.config/firefox/profiles/default-no-rfp" -}}
{{-     if eq .osRelId "fedora" -}}
{{-       $releaseId = mozillaInstallHash "/usr/lib64/firefox" -}}{{- /* "11457493C5A56847" */ -}}
{{-     else if eq .osRelId "arch" -}}
{{-       $releaseId = mozillaInstallHash "/usr/lib/firefox" -}}{{- /* "4F96D1932A9F858E" */ -}}
{{-     else if eq .osRelId "debian" -}}
{{-       $releaseId = mozillaInstallHash "/usr/lib/firefox-esr" -}}{{- /* "l3B6073811A6ABF12" */ -}}
{{-     end -}}
{{-   else if eq .installType "flatpak" -}}
{{-     $releaseId = mozillaInstallHash "/app/lib/firefox" -}}{{- /* "CF146F38BCAB2D21" */ -}}
{{-     $nightlyId = mozillaInstallHash "/opt/firefox-nightly" -}}{{- /* "6BA5C87ECB35E12F" */ -}}
{{-   else if eq .installType "snap" -}}
{{-     if eq .osRelId "ubuntu" -}}
{{-       $releaseId = mozillaInstallHash "/snap/firefox/current/usr/lib/firefox" -}}{{- /* "174EDC698F909AE0" */ -}}
{{-     end -}}
{{-   end -}}
{{- end -}}

[General]
StartWithLastProfile=1
Version=2

[Profile0]
Name=default
IsRelative={{ $relative }}
Path={{- $defaultPath }}
Default=1

[Profile1]
Name=direct
IsRelative={{ $relative }}
Path={{- $directPath }}

[Profile2]
Name=direct-no-rfp
IsRelative={{ $relative }}
Path={{- $directNoRFPpath }}

[Profile3]
Name=default-no-rfp
IsRelative={{ $relative }}
Path={{- $noRFPpath }}

[Install{{- $releaseId -}}]
Default={{- $defaultPath }}
Locked=1
{{- end -}}
